<!DOCTYPE html>
<html class="no-js">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title> P3096 [USACO13DEC]假期计划（黄金）Vacation Planning (gold) - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1555852736:MeYZqmqWGp5u+MI9UePpT5658oFiWIwVHX+Trcoj9tU=">
<link rel="stylesheet" href="https://cdn.luogu.org/css/amazeui.min.css"/>
<link rel="stylesheet" href="https://cdn.luogu.org/css/katex.min.css"/>
<link rel="stylesheet" href="https://cdn.luogu.org/css/luogu3.css?ver=20190102">
<link rel="stylesheet" href="https://cdn.luogu.org/css/highlight_tomorrow.css">
<link rel="stylesheet" href="https://cdn.luogu.org/markdown-palettes/markdown-palettes.css?ver=20190219">
<script src="https://cdn.luogu.org/js/jquery-2.1.1.min.js"></script>
<script src="https://cdn.luogu.org/js/luogu3_pre.js?ver=20190101"></script>
<link rel="shortcut icon" type="image/x-icon" href="https://cdn.luogu.org/images/favicon3.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.org/fe/loader.css?ver=20190417">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentUser%22%3Anull%2C%22currentTemplate%22%3A%22Excited%22%2C%22currentData%22%3A%7B%22shortHeader%22%3Afalse%2C%22pageName%22%3A%22%5Cu9898%5Cu76ee%5Cu8be6%5Cu60c5%22%7D%2C%22currentMeta%22%3A%7B%22title%22%3A%22%20P3096%20%5BUSACO13DEC%5D%5Cu5047%5Cu671f%5Cu8ba1%5Cu5212%5Cuff08%5Cu9ec4%5Cu91d1%5Cuff09Vacation%20Planning%20%28gold%29%22%7D%7D"));</script>
<script>window._release = '20190417';</script>
<script src="https://cdn.luogu.org/fe/loader.js?ver=20190417" charset="utf-8" defer></script>
</head>
<body>
<div id="app-header"></div>
<nav id="app-sidenav"></nav>
<div id="app-body"></div>
<script>
    function scrollToId (id) {
        $('html, body').animate({
            scrollTop: ($('#' + id).offset().top)
        }, 500);
    }
</script>
<style>
    .lg-toolbar {
        display: none;
    }

    #app-body { /* Unused in fallback FE */
        display: none;
    }

    #app-body-new{
        display: block;
        margin-bottom: 2em;
        position: relative;
        box-sizing: border-box;
        max-width: 100%;
    }

    @media (min-width: 576px) {
        #app-body-new {
            margin-left: 70px;
        }
    }

    code {
        font-family: monospace, "Courier New";
    }

</style>
<div id="app-body-new">
<div class="lg-toolbar" data-am-sticky>
<h1><a href="/recordnew/lists?uid=&pid=P3096" target="_blank"><strong class=""><i class="am-icon-minus"></i></strong></a> P3096 [USACO13DEC]假期计划（黄金）Vacation Planning (gold)</h1>
</div>
<div class="am-g lg-main-content">
<div class="am-u-md-4 lg-right" name="problemright">
<section class="am-panel am-panel-default lg-summary" id="psummary">
<div class="lg-summary-content">
<ul class="am-list am-list-static lg-summary-list">
<li>
<ul class="am-avg-sm-2"><li><span class="lg-bignum-num">112<small></small></span><span class="lg-bignum-text">通过</span></li><li><span class="lg-bignum-num">347<small></small></span><span class="lg-bignum-text">提交</span></li></ul>
</li>
<li>
<strong>题目提供者</strong>
<span class="lg-right"><a class='lg-fg-gray' href="/space/show?uid=20" target="_blank">FarmerJohn2</a></span>
</li>
<li>
<strong>评测方式</strong>
<span class="lg-right"><b>云端评测</b></span>
</li>
<li><strong>标签</strong>
<span class="lg-tag am-badge am-radius lg-bg-bluelight" data-tagid="46">USACO</span>
<span class="lg-tag am-badge am-radius lg-bg-green" data-tagid="30">2013</span>
<span class="lg-tag am-badge am-radius lg-bg-orange" data-tagid="319">高性能</span>
<style>.lg-tag { cursor: pointer; }</style>
<script>
                                $(".lg-tag").click(function() {
                                    window.open("/problemnew/lists?tag=" + $(this).attr('data-tagid'));
                                })
                            </script>
</li>
<li><strong>难度</strong>
<span class="lg-right"><span class="am-badge am-radius lg-bg-bluelight">提高+/省选-</span></span>
</li>
<li><strong>时空限制</strong>
<span class="lg-right">1000ms / 128MB</span>
</li>
</ul>
</div>
<p>
<button class="am-btn am-btn-danger am-btn-sm" id="submit" pid="P3096">
<i class="am-icon-paper-plane"></i> 提交
</button>
<a target="_blank" href="/problemnew/solution/P3096" class="am-btn am-btn-primary am-btn-sm">
<i class="am-icon-book"></i> 题解
</a>
<a data-pjax href="/recordnew/lists?pid=P3096" class="am-btn am-btn-primary am-btn-sm" title="查看本题提交记录">
<i class="am-icon-pie-chart"></i>
</a>
<button class="am-btn am-btn-primary am-btn-sm lg-pointer" name="showtag" title="显示算法标签">
<i class="am-icon-tags"></i>
</button>
</p>
<li>提示：收藏到任务计划后，可在首页查看。</li>
<p>
<a class="am-btn am-btn-danger am-btn-sm" href="/fe/problem/P3096" target="_blank">体验新版界面</a>
</p>
</section>
<section class="am-panel am-panel-default lg-summary">
<h2>最新讨论
<a onclick="$('#discuss-lists').show();$(this).hide();" class="am-btn am-btn-primary am-btn-sm lg-right" title="查看本题讨论">
显示
</a>
</h2>
<ul class="am-list am-list-static lg-summary-list" style="display: none" id="discuss-lists">
<li><a data-pjax href="/discuss/show?postid=63293" class="am-padding-0">奇怪</a>
</li>
<li><a data-pjax href="/discuss/show?postid=63255" class="am-padding-0">这个翻译还不如谷歌翻译呢</a>
</li>
<li><a data-pjax href="/discuss/show?postid=61558" class="am-padding-0">这个题貌似卡dijkstra但是s…</a>
</li>
<li><a data-pjax href="/discuss/show?postid=25594" class="am-padding-0">渣翻</a>
</li>
<li><a data-pjax href="/discuss/show?postid=4929" class="am-padding-0">题目描述不充分</a>
</li>
<li><a data-pjax href="/discuss/show?postid=4905" class="am-padding-0">这题好难啊</a>
</li>
<div style="overflow: auto">
<a data-pjax href="/discuss/lists?forumname=P3096" class="am-btn am-btn-primary am-btn-sm lg-right">进入讨论版</a>
</div>
</ul>
</section>
<section class="am-panel am-panel-default lg-summary am-hide-sm">
<h2>推荐的相关题目
<a onclick="$('#recommendation-list').show();$(this).hide();" class="am-btn am-btn-primary am-btn-sm lg-right" title="查看推荐题目">
显示
</a>
</h2>
<ul class="am-list am-list-static lg-summary-list" id="recommendation-list" style="display: none">
<li>
<a class='colored' href="/problemnew/show/P3097" target="_blank"><b>P3097</b> [USACO13DEC]最优挤奶Optimal Milking</a>
</li>
<li>
<a class='colored' href="/problemnew/show/P4186" target="_blank"><b>P4186</b> [USACO18JAN]Cow at Large G</a>
</li>
<li>
<a class='colored' href="/problemnew/show/P3033" target="_blank"><b>P3033</b> [USACO11NOV]牛的障碍Cow Steeplechase</a>
</li>
<li>
<a class='colored' href="/problemnew/show/P4568" target="_blank"><b>P4568</b> [JLOI2011]飞行路线</a>
</li>
<li>
<a class='colored' href="/problemnew/show/P3237" target="_blank"><b>P3237</b> [HNOI2014]米特运输</a>
</li>
</ul>
</section>
</div>
<div class="am-u-md-8 lg-right" name="problemleft">
<div class="lg-content-left">
<div class="lg-article am-g">
<h2>题意翻译</h2>
<p>Bovinia航空公司的航线连接了奶牛居住的N个农场(1&lt;=N&lt;=20000).如同其他公司一样，所有农场当中的K个被设定为枢纽。</p>
<p>现在Bovinia航空公司提供M条单项航线(1&lt;=M&lt;=20000)，第i条航线从u_i号农场出发，目的地是第v_i号农场，开销为k_i美刀。(1&lt;=d_i&lt;=10000)</p>
<p>对于每一条航线，u_i和v_i当中至少有一个是枢纽，两个农场间的航线最多只有1条，没有起点终点相同的航线。</p>
<p>Bessie负责管理Bovinia航空公司的售票服务。不幸的是，</p>
<p>当她离开了几个小时去吃一些美味的干草时，奶牛们发来了</p>
<p>Q(1&lt;=Q&lt;=50000)个单程的假期旅行订单，i号订单希望从a_i号农场飞到b_i号农场。</p>
<p>Bessie快要被订票的工作压垮了，请你帮帮她计算一下每个订单能否被满足，如果能满足，</p>
<p>计算满足该订单的最小花费。</p>
<p>为了减少输出量，你应当只输出最多可满足的订单数和最小的总花费。</p>
<p>答案可能超出int范围</p>
<p>感谢@xiwang 提供的翻译</p>
<h2>题目描述</h2>
<p>Air Bovinia operates flights connecting the N farms that the cows live on (1 &lt;= N &lt;= 20,000). As with any airline, K of these farms have been designated as hubs (1 &lt;= K &lt;= 200, K &lt;= N).</p>
<p>Currently, Air Bovinia offers M one-way flights (1 &lt;= M &lt;= 20,000), where flight i travels from farm u_i to farm v_i and costs d_i (1 &lt;= d_i &lt;= 10,000) dollars. As with any other sensible airline, for each of these flights, at least one of u_i and v_i is a hub. There is at most one direct flight between two farms in any given direction, and no flight starts and ends at the same farm.</p>
<p>Bessie is in charge of running the ticketing services for Air Bovinia. Unfortunately, while she was away chewing on delicious hay for a few hours, Q one-way travel requests for the cows' holiday vacations were received (1 &lt;= Q &lt;= 50,000), where the ith request is from farm a_i to farm b_i.</p>
<p>As Bessie is overwhelmed with the task of processing these tickets, please help her compute whether each ticket request can be fullfilled, and its minimum cost if it can be done.</p>
<p>To reduce the output size, you should only output the total number of ticket requests that are possible, and the minimum total cost for them. Note that this number might not fit into a 32-bit integer.</p>
<p>是n个点m条有向边，求两两之间的最短路，要求路径上必须经过编号1~k的至少一个点</p>
<h2>输入输出格式</h2>
<strong>输入格式：</strong><br>
<p><p>* Line 1: The integers N, M, K, and Q.</p>
<p>* Lines 2..M + 1: Line i+1 contains u_i, v_i, and d_i. (1 &lt;= u_i, v_i &lt;= N, u_i != v_i)</p>
<p>* Lines M + 2..M + K + 1: Each of these lines contains the ID of a single hub (in the range 1..N).</p>
<p>* Lines M + K + 2..M + K + Q + 1: Two numbers per line, indicating a request for a ticket from farm a_i to b_i. (1 &lt;= a_i, b_i &lt;= N, a_i != b_i)</p></p>
<strong>输出格式：</strong><br>
<p><p>* Line 1: The number of ticket requests that can be fullfilled.</p>
<p>* Line 2: The minimum total cost of fulling the possible ticket requests</p></p>
<h2>输入输出样例</h2>
<div class="am-g">
<div class="am-u-md-6 copy-region">
<strong>输入样例#1：</strong>
<a class="am-badge am-radius lg-bg-orange sample-copy">复制</a>
<pre>3 3 1 2 
1 2 10 
2 3 10 
2 1 5 
2 
1 3 
3 1 
</pre>
</div>
<div class="am-u-md-6 copy-region">
<strong>输出样例#1：</strong>
<a class="am-badge am-radius lg-bg-orange sample-copy">复制</a>
<pre>1 
20 
</pre>
</div>
</div>
<h2>说明</h2>
<p>For the first flight, the only feasible route is 1-&gt;2-&gt;3, costing 20. There are no flights leaving farm 3, so the poor cows are stranded there.</p>
</div>
<div class='lg-article-sub am-g' id="sub"></div>
</div>
</div>
</div>
<div class="am-modal am-modal-prompt" tabindex="-1" id="confirm">
<div class="am-modal-dialog">
<div class="am-modal-hd" id="memtitle">提示</div>
<div class="am-modal-bd" id="memadmin">
标程仅供做题后或实在无思路时参考。<br>
请自觉、自律地使用该功能并请对自己的学习负责。<br>
如果发现恶意抄袭标程，将按照I类违反进行处理。<br>
</div>
<div class="am-modal-footer">
<span class="am-modal-btn" data-am-modal-cancel>取消</span>
<span class="am-modal-btn" data-am-modal-confirm>确定</span>
</div>
</div>
</div>
<script>
        $(document).ready(function () {
            $("#expandstd").click(function () {
                $('#confirm').modal({
                    relatedTarget: this,
                    onConfirm: function (e) {
                        $("#stdcode").slideDown();
                        $("#expandstd").hide();
                    }
                });
            });
            $("#submit").click(
                function () {
                    hide_artile();
                    $(document).scrollTop($(document).scrollTop() - 80);
                    var pid = $(this).attr("pid");
                    $.get("/problem/ajax_submit?pid=" + pid, function (data) {
                        var arr = eval('(' + data + ')');
                        if (arr['code'] == 201) {
                            $('.lg-article-sub').html(arr['more']['html']);
                        }
                        else if (arr['code'] == 200) {

                        }
                        else {
                            if (arr['code'] == 0 || arr['code'] == -3) {
                                backarticle();
                            }
                            show_alert("提交失败", arr['message']);
                        }
                    });
                }
            );
            $("button[title].am-btn,a[title].am-btn").poshytip({
                className: 'tip-twitter',
                showTimeout: 1,
                alignTo: 'target',
                alignX: 'center',
                alignY: 'bottom'
            });
            $('[name=showtag]').click(function () {
                $('.am-badge.am-hide').removeClass('am-hide');
            });
            $(".sample-copy").click(function() {
                var element = $(this).parents(".copy-region").find("pre");
                var text = $(element).text();
                var $temp = $("<textarea>");
                $("body").append($temp);
                $temp.val(text).select();
                document.execCommand("copy");
                $temp.remove();
                $(this).text("复制成功").removeClass("lg-bg-orange");

                var e = this;
                setTimeout(function() {
                    $(e).text("复制").addClass("lg-bg-orange");
                }, 500);
            });
        });
    </script>
</div>
<footer id="app-footer"></footer>
<div class="am-modal am-modal-alert" tabindex="-1" id="lg-alert">
<div class="am-modal-dialog">
<div class="am-modal-hd" id="lg-alert-title"></div>
<div class="am-modal-bd" id="lg-alert-message"></div>
<div class="am-modal-footer">
<span class="am-modal-btn">确定</span>
</div>
</div>
</div>
<script src="/js/ace/ace.js"></script>
<script src="https://cdn.luogu.org/js/vendor.js" data-manual></script>
<script src="https://cdn.luogu.org/js/jsmind.js" data-manual></script>
<script src="https://cdn.luogu.org/js/amazeui.min.js"></script>
<script src="https://cdn.luogu.org/js/highcharts.js"></script>
<script src="https://cdn.luogu.org/js/highcharts-more.js"></script>
<script src="/static/katex/katex.min.js"></script>
<script src="/static/katex/contrib/auto-render.min.js"></script>
<script src="https://cdn.luogu.org/markdown-palettes/markdown-palettes.min.js?ver=20190219"></script>
<script src="https://cdn.luogu.org/js/luogu3.js?ver=20190101"></script>
</body>
</html>
