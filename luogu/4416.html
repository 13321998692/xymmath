<!DOCTYPE html>
<html class="no-js">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title> P4416 [COCI2017-2018#1] Plahte - 洛谷</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="renderer" content="webkit">
<meta name="csrf-token" content="1555853329:9LJ79muE6ifc9oF312PvFaXKtTHgBe88JMUqGy+qEnU=">
<link rel="stylesheet" href="https://cdn.luogu.org/css/amazeui.min.css"/>
<link rel="stylesheet" href="https://cdn.luogu.org/css/katex.min.css"/>
<link rel="stylesheet" href="https://cdn.luogu.org/css/luogu3.css?ver=20190102">
<link rel="stylesheet" href="https://cdn.luogu.org/css/highlight_tomorrow.css">
<link rel="stylesheet" href="https://cdn.luogu.org/markdown-palettes/markdown-palettes.css?ver=20190219">
<script src="https://cdn.luogu.org/js/jquery-2.1.1.min.js"></script>
<script src="https://cdn.luogu.org/js/luogu3_pre.js?ver=20190101"></script>
<link rel="shortcut icon" type="image/x-icon" href="https://cdn.luogu.org/images/favicon3.ico" media="screen"/>
<link rel="stylesheet" href="https://cdn.luogu.org/fe/loader.css?ver=20190417">
<script>window._feInjection = JSON.parse(decodeURIComponent("%7B%22code%22%3A200%2C%22currentUser%22%3Anull%2C%22currentTemplate%22%3A%22Excited%22%2C%22currentData%22%3A%7B%22shortHeader%22%3Afalse%2C%22pageName%22%3A%22%5Cu9898%5Cu76ee%5Cu8be6%5Cu60c5%22%7D%2C%22currentMeta%22%3A%7B%22title%22%3A%22%20P4416%20%5BCOCI2017-2018%231%5D%20Plahte%22%7D%7D"));</script>
<script>window._release = '20190417';</script>
<script src="https://cdn.luogu.org/fe/loader.js?ver=20190417" charset="utf-8" defer></script>
</head>
<body>
<div id="app-header"></div>
<nav id="app-sidenav"></nav>
<div id="app-body"></div>
<script>
    function scrollToId (id) {
        $('html, body').animate({
            scrollTop: ($('#' + id).offset().top)
        }, 500);
    }
</script>
<style>
    .lg-toolbar {
        display: none;
    }

    #app-body { /* Unused in fallback FE */
        display: none;
    }

    #app-body-new{
        display: block;
        margin-bottom: 2em;
        position: relative;
        box-sizing: border-box;
        max-width: 100%;
    }

    @media (min-width: 576px) {
        #app-body-new {
            margin-left: 70px;
        }
    }

    code {
        font-family: monospace, "Courier New";
    }

</style>
<div id="app-body-new">
<div class="lg-toolbar" data-am-sticky>
<h1><a href="/recordnew/lists?uid=&pid=P4416" target="_blank"><strong class=""><i class="am-icon-minus"></i></strong></a> P4416 [COCI2017-2018#1] Plahte</h1>
</div>
<div class="am-g lg-main-content">
<div class="am-u-md-4 lg-right" name="problemright">
<section class="am-panel am-panel-default lg-summary" id="psummary">
<div class="lg-summary-content">
<ul class="am-list am-list-static lg-summary-list">
<li>
<ul class="am-avg-sm-2"><li><span class="lg-bignum-num">51<small></small></span><span class="lg-bignum-text">通过</span></li><li><span class="lg-bignum-num">125<small></small></span><span class="lg-bignum-text">提交</span></li></ul>
</li>
<li>
<strong>题目提供者</strong>
<span class="lg-right"><a class='lg-fg-purple lg-bold' href="/space/show?uid=8457" target="_blank">chen_zhe</a>&nbsp;<span class="am-badge am-radius lg-bg-purple">Aya</span></span>
</li>
<li>
<strong>评测方式</strong>
<span class="lg-right"><b>云端评测</b></span>
</li>
<li><strong>标签</strong>
<span class="lg-tag am-badge am-radius lg-bg-pink am-hide" data-tagid="43">倍增</span>
<span class="lg-tag am-badge am-radius lg-bg-pink am-hide" data-tagid="318">构造</span>
<span class="lg-tag am-badge am-radius lg-bg-pink am-hide" data-tagid="42">线段树</span>
<span class="lg-tag am-badge am-radius lg-bg-bluelight" data-tagid="333">COCI</span>
<span class="lg-tag am-badge am-radius lg-bg-green" data-tagid="34">2017</span>
<style>.lg-tag { cursor: pointer; }</style>
<script>
                                $(".lg-tag").click(function() {
                                    window.open("/problemnew/lists?tag=" + $(this).attr('data-tagid'));
                                })
                            </script>
</li>
<li><strong>难度</strong>
<span class="lg-right"><span class="am-badge am-radius lg-bg-green">普及+/提高</span></span>
</li>
<li><strong>时空限制</strong>
<span class="lg-right">1000ms / 128MB</span>
</li>
</ul>
</div>
<p>
<button class="am-btn am-btn-danger am-btn-sm" id="submit" pid="P4416">
<i class="am-icon-paper-plane"></i> 提交
</button>
<a target="_blank" href="/problemnew/solution/P4416" class="am-btn am-btn-primary am-btn-sm">
<i class="am-icon-book"></i> 题解
</a>
<a data-pjax href="/recordnew/lists?pid=P4416" class="am-btn am-btn-primary am-btn-sm" title="查看本题提交记录">
<i class="am-icon-pie-chart"></i>
</a>
<button class="am-btn am-btn-primary am-btn-sm lg-pointer" name="showtag" title="显示算法标签">
<i class="am-icon-tags"></i>
</button>
</p>
<li>提示：收藏到任务计划后，可在首页查看。</li>
<p>
<a class="am-btn am-btn-danger am-btn-sm" href="/fe/problem/P4416" target="_blank">体验新版界面</a>
</p>
</section>
<section class="am-panel am-panel-default lg-summary">
<h2>最新讨论
<a onclick="$('#discuss-lists').show();$(this).hide();" class="am-btn am-btn-primary am-btn-sm lg-right" title="查看本题讨论">
显示
</a>
</h2>
<ul class="am-list am-list-static lg-summary-list" style="display: none" id="discuss-lists">
<li><a data-pjax href="/discuss/show?postid=102663" class="am-padding-0">疑问</a>
</li>
<li><a data-pjax href="/discuss/show?postid=63762" class="am-padding-0">萌新88分求教！普及难度的都…</a>
</li>
<li><a data-pjax href="/discuss/show?postid=42813" class="am-padding-0">正版标题</a>
</li>
<li><a data-pjax href="/discuss/show?postid=42812" class="am-padding-0">蒟蒻的翻译（楼下是同学@LJ…</a>
</li>
<li><a data-pjax href="/discuss/show?postid=42777" class="am-padding-0">蒟蒻的翻译</a>
</li>
<li><a data-pjax href="/discuss/show?postid=39612" class="am-padding-0">题意</a>
</li>
<div style="overflow: auto">
<a data-pjax href="/discuss/lists?forumname=P4416" class="am-btn am-btn-primary am-btn-sm lg-right">进入讨论版</a>
</div>
</ul>
</section>
<section class="am-panel am-panel-default lg-summary am-hide-sm">
<h2>推荐的相关题目
<a onclick="$('#recommendation-list').show();$(this).hide();" class="am-btn am-btn-primary am-btn-sm lg-right" title="查看推荐题目">
显示
</a>
</h2>
<ul class="am-list am-list-static lg-summary-list" id="recommendation-list" style="display: none">
<li>
<a class='colored' href="/problemnew/show/P4414" target="_blank"><b>P4414</b> [COCI2006-2007#2] ABC</a>
</li>
<li>
<a class='colored' href="/problemnew/show/P4745" target="_blank"><b>P4745</b> [CERC2017]Gambling Guide</a>
</li>
<li>
<a class='colored' href="/problemnew/show/P3719" target="_blank"><b>P3719</b> [AHOI2017初中组]rexp</a>
</li>
<li>
<a class='colored' href="/problemnew/show/P1919" target="_blank"><b>P1919</b> 【模板】A*B Problem升级版（FFT快速傅里叶）</a>
</li>
<li>
<a class='colored' href="/problemnew/show/P2181" target="_blank"><b>P2181</b> 对角线</a>
</li>
</ul>
</section>
</div>
<div class="am-u-md-8 lg-right" name="problemleft">
<div class="lg-content-left">
<div class="lg-article am-g">
<h2>题意翻译</h2>
<p>小唐纳德决定一天洗完他的白色床单。洗完后，他把它们放在后院的地上晾干。唐纳德把床单放在上面，使它们之间角或边不会互相接触，边也不会相交，但他可能把较小的床单放在大的上面，或者一个完全覆盖另个。做完这件事后，唐纳德上床睡觉了。</p>
<p>唐纳德的朋友基姆不知怎么地得到了唐纳德正在烘干他的床单的消息，决定和他捣乱。他在阁楼上找到了他父亲的彩弹枪。除了枪之外，还有不同颜色的彩弹球，但有可能有很多的球是相同的颜色。唐纳德一睡着，基姆走进他的后院，开始用他的彩弹枪射击床单。我们都知道床单会渗水，所以当基姆射出最上面的那张床单时，那张床单会把球的颜色渗到下面的所有床单上。基姆用了所有的球后，他愉快地离开了唐纳德的后院。</p>
<p>当唐纳德醒过来去拿床单时，非常震惊。在唐纳德的大部分床单上都有一些新的颜色。由于唐纳德对正确的数据很感兴趣，他太震惊了，以至于无法思考，他要求你告诉他每张床单上的新颜色的数量。</p>
<p>我们可以把唐纳德的后院表示成一个无限坐标系，而这些床单是平行于坐标轴的矩形。基姆的彩弹可以表示为该系统中的点。</p>
<p>请注意：基姆的彩弹可能没有打到任何一张床单，但是每一个彩弹的坐标都是独一无二的。</p>
<p>输入的第一行包含正整数床单的数量n（1≤n≤80000）和彩弹球数m（1≤m≤80000）。</p>
<p>接下来的n行中的每一行包含四个数字：表示左下角的坐标Ai,Bi(1≤Ai,Bi≤1000000000)和右上角的坐标Ci,Di(1 ≤Ci,Di≤1000000000)。</p>
<p>接下来的M行中的每一行包含三个数字，包含基姆投篮的坐标Xj,Yj(1≤Xj,Yj≤1000000000)，第j个球的颜色Kj(1≤Kj≤1000000000)。</p>
<p>共n行，每一行必须包含在第i张床单上的新颜色的数量。</p>
<h2>题目描述</h2>
<p>Little Donald decided to wash all N of his white sheets one day. After washing them, he put them to dry on the ground in his backyard. Donald placed the sheets so that <strong> none of them touch on the tips or the sides and that none of their sides intersect​</strong>, but it is possible that he placed smaller sheets on top of bigger ones, or that a sheet is completely covering another sheet. After doing this, Donald went to bed.</p>
<p>Donald’s friend Kim somehow got the information that Donald is drying his sheets and
decided to mess with him. He found a paintball gun from his father in the attic. Along with the
gun, there were M paintball balls in different colours, but it is possible that there were more
balls having the same colour. As soon as Donald fell asleep, Kim walked into his backyard
and started shooting the sheets with his paintball gun. We all know that sheets bleed, so
when Kim shoots the topmost sheet, that sheet would bleed the color of the ball down to all
of the sheets beneath it. After Kim used all the balls, he happily left Donald’s backyard.</p>
<p>When Donald woke up and went to get his sheets, shock ensued. On most of Donald’s
sheets, there was a number of new colours. Since Donald is very interested in correct data,
and he’s in shock and not able to think, he is asking you to tell him the number of new
colours on each sheet.</p>
<p>We can represent Donald’s backyard as an infinite coordinate system, and the sheets as
rectangles parallel to the coordinate axes. Kim’s shots can be represented as points in that
system.</p>
<p>Please note: it is possible that Kim’s shot missed all the sheets, but coordinates of each shot
are unique.</p>
<h2>输入输出格式</h2>
<strong>输入格式：</strong><br>
<p><p>The first line of input contains the positive integers N (1 ≤ N ≤ 80 000), the number of sheets,
and M (1 ≤ M ≤ 80 000), the number of paintball balls.</p>
<p>The $i^{th}$ of the following N lines contains four numbers: the coordinates of the lower left corner $A_i$, $B_i$ (1 ≤ $A_i$, $B_i$ ≤ $10^9$) and the upper right corner $C_i$, $D_i$, (1 ≤ $C_i$, $D_i$ ≤ $10^9$) of the $i^{th}$ sheet.</p>
<p>The $j^{th}$ of the following M lines contains the coordinates where Kim’s $j^{th}$ shot landed $X_j$, $Y_j$ (1 ≤$X_j$, $Y_j$ ≤ $10^9$), and $K_j$(1 ≤ $K_j$ ≤ $10^9$), the colour label of the $j^{th}$ ball.</p></p>
<strong>输出格式：</strong><br>
<p><p>The $i^{th}$ of N lines must contain the number of new colours on the $i^{th}$ sheet.</p></p>
<h2>输入输出样例</h2>
<div class="am-g">
<div class="am-u-md-6 copy-region">
<strong>输入样例#1：</strong>
<a class="am-badge am-radius lg-bg-orange sample-copy">复制</a>
<pre>2 2
1 1 3 3
5 6 10 10
3 3 1
5 1 2
</pre>
</div>
<div class="am-u-md-6 copy-region">
<strong>输出样例#1：</strong>
<a class="am-badge am-radius lg-bg-orange sample-copy">复制</a>
<pre>1
0</pre>
</div>
</div>
<div class="am-g">
<div class="am-u-md-6 copy-region">
<strong>输入样例#2：</strong>
<a class="am-badge am-radius lg-bg-orange sample-copy">复制</a>
<pre>3 3
1 1 7 7
2 2 6 6
3 3 5 5
4 4 1
2 6 2
4 7 3
</pre>
</div>
<div class="am-u-md-6 copy-region">
<strong>输出样例#2：</strong>
<a class="am-badge am-radius lg-bg-orange sample-copy">复制</a>
<pre>3
2
1</pre>
</div>
</div>
<div class="am-g">
<div class="am-u-md-6 copy-region">
<strong>输入样例#3：</strong>
<a class="am-badge am-radius lg-bg-orange sample-copy">复制</a>
<pre>1 3
1 1 7 7
2 6 2
4 7 3
4 4 1
</pre>
</div>
<div class="am-u-md-6 copy-region">
<strong>输出样例#3：</strong>
<a class="am-badge am-radius lg-bg-orange sample-copy">复制</a>
<pre>3</pre>
</div>
</div>
<h2>说明</h2>
<p><img src="https://cdn.luogu.org/upload/pic/17380.png" alt="" /></p>
</div>
<div class='lg-article-sub am-g' id="sub"></div>
</div>
</div>
</div>
<div class="am-modal am-modal-prompt" tabindex="-1" id="confirm">
<div class="am-modal-dialog">
<div class="am-modal-hd" id="memtitle">提示</div>
<div class="am-modal-bd" id="memadmin">
标程仅供做题后或实在无思路时参考。<br>
请自觉、自律地使用该功能并请对自己的学习负责。<br>
如果发现恶意抄袭标程，将按照I类违反进行处理。<br>
</div>
<div class="am-modal-footer">
<span class="am-modal-btn" data-am-modal-cancel>取消</span>
<span class="am-modal-btn" data-am-modal-confirm>确定</span>
</div>
</div>
</div>
<script>
        $(document).ready(function () {
            $("#expandstd").click(function () {
                $('#confirm').modal({
                    relatedTarget: this,
                    onConfirm: function (e) {
                        $("#stdcode").slideDown();
                        $("#expandstd").hide();
                    }
                });
            });
            $("#submit").click(
                function () {
                    hide_artile();
                    $(document).scrollTop($(document).scrollTop() - 80);
                    var pid = $(this).attr("pid");
                    $.get("/problem/ajax_submit?pid=" + pid, function (data) {
                        var arr = eval('(' + data + ')');
                        if (arr['code'] == 201) {
                            $('.lg-article-sub').html(arr['more']['html']);
                        }
                        else if (arr['code'] == 200) {

                        }
                        else {
                            if (arr['code'] == 0 || arr['code'] == -3) {
                                backarticle();
                            }
                            show_alert("提交失败", arr['message']);
                        }
                    });
                }
            );
            $("button[title].am-btn,a[title].am-btn").poshytip({
                className: 'tip-twitter',
                showTimeout: 1,
                alignTo: 'target',
                alignX: 'center',
                alignY: 'bottom'
            });
            $('[name=showtag]').click(function () {
                $('.am-badge.am-hide').removeClass('am-hide');
            });
            $(".sample-copy").click(function() {
                var element = $(this).parents(".copy-region").find("pre");
                var text = $(element).text();
                var $temp = $("<textarea>");
                $("body").append($temp);
                $temp.val(text).select();
                document.execCommand("copy");
                $temp.remove();
                $(this).text("复制成功").removeClass("lg-bg-orange");

                var e = this;
                setTimeout(function() {
                    $(e).text("复制").addClass("lg-bg-orange");
                }, 500);
            });
        });
    </script>
</div>
<footer id="app-footer"></footer>
<div class="am-modal am-modal-alert" tabindex="-1" id="lg-alert">
<div class="am-modal-dialog">
<div class="am-modal-hd" id="lg-alert-title"></div>
<div class="am-modal-bd" id="lg-alert-message"></div>
<div class="am-modal-footer">
<span class="am-modal-btn">确定</span>
</div>
</div>
</div>
<script src="/js/ace/ace.js"></script>
<script src="https://cdn.luogu.org/js/vendor.js" data-manual></script>
<script src="https://cdn.luogu.org/js/jsmind.js" data-manual></script>
<script src="https://cdn.luogu.org/js/amazeui.min.js"></script>
<script src="https://cdn.luogu.org/js/highcharts.js"></script>
<script src="https://cdn.luogu.org/js/highcharts-more.js"></script>
<script src="/static/katex/katex.min.js"></script>
<script src="/static/katex/contrib/auto-render.min.js"></script>
<script src="https://cdn.luogu.org/markdown-palettes/markdown-palettes.min.js?ver=20190219"></script>
<script src="https://cdn.luogu.org/js/luogu3.js?ver=20190101"></script>
</body>
</html>
